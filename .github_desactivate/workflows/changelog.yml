# Flujo de trabajo para generar changelog autom√°tico
# Versi√≥n simplificada para principiantes

name: Generar Changelog

# Eventos que activan la generaci√≥n de changelog
on:
  push:
    branches: [ main, master ]
  release:
    types: [published]

jobs:
  # Job de generaci√≥n de changelog
  generate-changelog:
    name: Generar Changelog
    runs-on: ubuntu-latest
    
    steps:
    # Paso 1: Checkout del c√≥digo
    - name: Checkout c√≥digo
      uses: actions/checkout@v3
      with:
        fetch-depth: 0
    
    # Paso 2: Generar changelog autom√°tico
    - name: Generar changelog
      uses: requarks/changelog-action@v1
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        tag: ${{ github.ref_name }}
        output: CHANGELOG.md
    
    # Paso 3: Commit del changelog
    - name: Commit changelog
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add CHANGELOG.md
        git commit -m "docs: actualizar changelog para ${{ github.ref_name }}"
        git push
    
    # Paso 4: Notificar
    - name: Notificar generaci√≥n
      run: |
        echo "üìù Changelog generado y commitido"
        echo "üè∑Ô∏è  Versi√≥n: ${{ github.ref_name }}"
        echo "üìÑ Archivo: CHANGELOG.md"